import { Component, OnInit, HostListener, ViewChild, ElementRef } from '@angular/core';
import * as THREE from 'three';
import { HttpClient } from '@angular/common/http';
import axios from 'axios';
import { OBJLoader } from 'three/examples/jsm/loaders/OBJLoader.js';
import { StaticCanvas, FabricText, FabricObject, PencilBrush, Canvas, Rect, PatternBrush, FabricImage, Path } from 'fabric';
import { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader.js';
import { marked } from 'marked';

export enum Step {
  Start,
  Detect,
  GenerateImage,
  EditImage,
  GenerateMesh,
  GenerateInstructionPaper,
}

export enum Wait{
  Ready,
  Wait,
  Done,
}

export interface DetectedObject{
  name: string;
  material: string;
}

@Component({
  selector: 'app-root',
  templateUrl: './app.component.html', // 템플릿 분리
  styleUrls: ['./app.component.scss'], // 스타일 분리
})
export class AppComponent {
  @ViewChild('fabricContainer', { static: false }) public fabricContainerEl: ElementRef | undefined;
  @ViewChild('fabricCanvas', { static: false }) public fabricCanvasEl: ElementRef | undefined;
  @ViewChild('threeContainer', { static: false }) public threeContainer: ElementRef | undefined;
  
  public isLoading: boolean = false;
  public isShowFabric: boolean = false;
  public isShowCamera: boolean = false;
  public step = Step;
  public wait = Wait;
  public nowStep: Step = Step.Start;
  public nowWait: Wait = Wait.Wait;
  public demoImages: string[] = [
    'data:image/jpeg;base64,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',
    'data:image/jpeg;base64,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',
    'data:image/jpeg;base64,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',
    'data:image/jpeg;base64,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',
    'data:image/jpeg;base64,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'
  ]
  public chipItems: string[] = ['Material: Paper', 'Size: 1:1.1:1.6', 'Shape: Cup'];
  public chipItemsProductType: string[] = ['Practical', 'Decorative', 'Instant usage', 'Long-term usage'];
  public chipItemsTargetUsers: string[] = ['Teenagers', 'Adults', 'Elders'];
  public selectedProductTypes: string[] = [];
  public selectedTargetUsers: string[] = [];
  public prompt: string = 'give me image of practical upcycling products for teenagers from this by using DALL-E, but the image should only include that one object that i gave you and without any background stuff or other additional things beside of that object; i want to include only the object in the image!!! as for its usability, just show me in your description not in the image you give me. it should be feasible and possible to implement and make from this orgiinal object';
  public editPrompt: string = 'can you change this selected part, maintaining other parts, the styles and the structures as the same?'
  public instruction = undefined as unknown;
  public detectionResult = undefined as unknown;
  public cursorStyle = { top: '0px', left: '0px' };
  public detectedObjectList: DetectedObject[] = [
    { name: 'cup', material: "paper" },
    { name: 'tissuebox', material: "cardboard" },
    { name: 'bottle', material: "plastic" },
  ]
  public nowDetectedObject: DetectedObject = this.detectedObjectList[0];
  public nowDetectedObjectStr: string = '';

  private renderer!: THREE.WebGLRenderer;
  private scene!: THREE.Scene;
  private camera!: THREE.PerspectiveCamera;
  private models: THREE.Group = new THREE.Group(); // 모델 배열
  private fabricCanvas!: Canvas;
  constructor(private http: HttpClient) {
    axios.defaults.headers.post['Content-Type'] = 'application/json';
  }

  ngAfterViewInit(){
    this.initThreeJS(); //3
    this.animate();
  }

  @HostListener('document:mousemove', ['$event'])
  onMouseMove(event: MouseEvent): void {
    const invertedY = window.innerHeight - event.clientY; // Y 좌표 반전
    this.cursorStyle = {
      top: `${invertedY}px`,
      left: `${event.clientX}px`
    };
  }

  // Three.js 초기화
  private initThreeJS() {
    this.scene = new THREE.Scene();
    const containerWidth = this.threeContainer?.nativeElement?.clientWidth || window.innerWidth;
    const containerHeight = this.threeContainer?.nativeElement?.clientHeight || window.innerHeight;
    
    this.camera = new THREE.PerspectiveCamera(75, 1, 0.1, 1000);

    // 렌더러 설정
    this.renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
    this.renderer.setPixelRatio(
      window.devicePixelRatio > 1 ? window.devicePixelRatio : 2
    );
    this.renderer.setSize(containerWidth, containerHeight);
    //this.renderer.outputEncoding = THREE.sRGBEncoding; // 색상 보정

    // three-container에 렌더러 추가
    this.threeContainer?.nativeElement?.appendChild(this.renderer.domElement);

    // 조명 추가
    const ambientLight = new THREE.AmbientLight(0xffffff,3); // 환경광 강도 증가
    this.scene.add(ambientLight);

    const directionalLight = new THREE.DirectionalLight(0xffffff, 7); // 방향성 조명 강도 증가
    directionalLight.position.set(0, 0, 7.5);
    //this.scene.add(directionalLight);

    this.scene.add(this.models);

    // 카메라 위치 설정
    this.camera.position.z = 5;
  }

  // 애니메이션 처리
  private animate = () => {
    requestAnimationFrame(this.animate);
    const delta = 1/4;
    // 각 큐브 회전
    if (this.models.children.length > 0) {
      this.models.children.forEach((model) => {
        model.rotation.x += 0.01 * delta;
        model.rotation.y += 0.01 * delta;
        model.rotation.z += 0.01 * delta;
      });
    }

    this.renderer.render(this.scene, this.camera);
  };

  private initFabric(){
    this.fabricCanvas = new Canvas(this.fabricCanvasEl?.nativeElement, {
      width: 500,
      height: 500,
    });

    this.fabricCanvas.freeDrawingBrush = new PatternBrush(this.fabricCanvas);
    this.fabricCanvas.freeDrawingBrush.color = 'black';
    this.fabricCanvas.freeDrawingBrush.width = 30;
    this.fabricCanvas.isDrawingMode = true;
  }

  public async onClickConfirmButton(nextStep: Step, nextWait: Wait){
    this.nowStep = nextStep;
    this.nowWait = nextWait;
    if(this.nowStep === Step.Detect && this.nowWait === Wait.Wait){
      //await this.getObjectInfo();
      await this.getBoundingBox();
      const scaleFactor = 1/(this.detectionResult as any)['size'].x;
      this.chipItems[1]= 'Size: ' + 1 + ':' + scaleFactor*(this.detectionResult as any)['size'].y + ':' + scaleFactor*(this.detectionResult as any)['size'].z;
      await this.getOriginMesh();
      this.prompt = 'give me image of ' + ((this.selectedProductTypes.length > 0) ? this.selectedProductTypes[0] : 'practical') + ' one upcycling product for ' + ((this.selectedTargetUsers.length > 0) ? this.selectedTargetUsers[0] : 'teenagers') + ' from ' + this.nowDetectedObjectStr + ' by using DALL-E, but the image should only include that one object that i gave you and without any background stuff or other additional things beside of that object; i want to include only the object in the image!!! as for its usability, just show me in your description not in the image you give me. it should be feasible and possible to implement and make from this orgiinal object'
      this.nowWait = Wait.Done;
    }else if(this.nowStep === Step.GenerateImage && this.nowWait === Wait.Wait){
      this.isShowFabric = true;
      await this.getGenImage();
      this.nowWait = Wait.Done;
    }else if(this.nowStep === Step.GenerateMesh && this.nowWait === Wait.Wait){
      this.isShowFabric = false;
      if (this.fabricCanvas) {
        this.fabricCanvas.dispose();
      }
      await this.getGenMesh();
      this.nowWait = Wait.Done;
    }else if(this.nowStep === Step.GenerateInstructionPaper && this.nowWait === Wait.Wait){
      await this.getInstruction();
      this.nowWait = Wait.Done;
    }
  }

  public async onClickCancelButton(nextStep: Step, nextWait: Wait){
    this.nowStep = nextStep;
    this.nowWait = nextWait;
    if(this.nowStep === Step.EditImage && this.nowWait === Wait.Wait){
      this.isShowFabric = true;
      await this.editGenImage();
      this.nowStep = Step.GenerateImage;
      this.nowWait = Wait.Done;
    }
  }

  public onChangeChipSelection(selectedItems: string[], type: string){
    if(type === 'productType') this.selectedProductTypes = selectedItems;
    else if(type === 'targetUser') this.selectedTargetUsers = selectedItems;
    this.prompt = 'give me image of ' + ((this.selectedProductTypes.length > 0) ? this.selectedProductTypes[0] : 'practical') + ' upcycling products for ' + ((this.selectedTargetUsers.length > 0) ? this.selectedTargetUsers[0] : 'teenagers') + ' from ' + this.nowDetectedObjectStr + ' by using DALL-E, but the image should only include that one object that i gave you and without any background stuff or other additional things beside of that object; i want to include only the object in the image!!! as for its usability, just show me in your description not in the image you give me. it should be feasible and possible to implement and make from this orgiinal object'
  }

  public changeImg(imageSrc: string){
    
    if(this.fabricCanvas == undefined || this.fabricCanvas == null){
      this.initFabric();
    }
    this.fabricCanvas.clear();
    FabricImage.fromURL(imageSrc).then((image) => {
      // 이미지 비율 유지하면서 300x300에 맞게 크기 조정
      const targetWidth = 500;
      const targetHeight = 500;

      // 이미지 크기 조정 (비율 유지)
      const scaleX = targetWidth / image.width!;
      const scaleY = targetHeight / image.height!;
      const scale = Math.min(scaleX, scaleY); // 작은 스케일로 설정 (비율 유지)

      image.set({
        scaleX: scale,
        scaleY: scale,
        left: (this.fabricCanvas.width! - targetWidth) / 2, // 가운데 정렬
        top: (this.fabricCanvas.height! - targetHeight) / 2,
      });
      this.fabricCanvas.add(image);
    })
  }

  public getMask(){
    const canvas = new Canvas(undefined, {width: 500, height: 500})
    const brushPaths = this.fabricCanvas.getObjects('path');
    this.fabricCanvas.clear()
    brushPaths.forEach( (path) => {
      path.set({
        fill: 'white',
        stroke: 'white'
      })
      canvas.add(path);
    })
    
    // 기존 캔버스 크기
    const originalWidth = canvas.width;
    const originalHeight = canvas.height;

    // 리사이즈 목표 크기
    const targetWidth = 1024;
    const targetHeight = 1024;

    // 스케일 계산
    const scaleX = targetWidth / originalWidth;
    const scaleY = targetHeight / originalHeight;

    // 캔버스 리사이즈
    canvas.width = targetWidth;
    canvas.height = targetHeight;

    // 모든 객체 스케일 조정
    canvas.getObjects().forEach((obj) => {
      obj.scaleX = (obj.scaleX || 1) * scaleX;
      obj.scaleY = (obj.scaleY || 1) * scaleY;
      obj.left = (obj.left || 0) * scaleX;
      obj.top = (obj.top || 0) * scaleY;
      obj.setCoords(); // 객체 좌표 업데이트
    });
    canvas.backgroundColor = 'rgba(0,0,0,1)'
    canvas.renderAll();

    const maskedImgUrl = canvas.toDataURL({
      format: 'png',
      multiplier: 1,
    });
    return maskedImgUrl;
  }

  private dataURLToBlob(dataurl: string){
    const arr = dataurl.split(',');
    const mime = arr[0]!.match(/:(.*?);/)![1];
    const bstr = atob(arr[1]);
    let n = bstr.length;
    const u8arr = new Uint8Array(n);
    while (n--) {
      u8arr[n] = bstr.charCodeAt(n);
    }
    return new Blob([u8arr], { type: mime });
  }

  // 화면 크기 변경에 따른 처리
  @HostListener('window:resize', ['$event'])
  onWindowResize() {
    const container = document.getElementById('three-container');
    const containerWidth = container?.clientWidth || window.innerWidth;
    const containerHeight = container?.clientHeight || window.innerHeight;
    this.camera.aspect = containerWidth / containerHeight;
    this.camera.updateProjectionMatrix();
    this.renderer.setSize(containerHeight, containerHeight);
  }

  public async getGenImage(){
    let response = await axios.get('http://localhost:5001/api/gen_image?prompt=' + encodeURIComponent(this.prompt) + '&object=' + encodeURIComponent(this.nowDetectedObject.name));
    console.log(response.data)
    this.changeImg(response.data as string)
    //this.changeImg('https://flexible.img.hani.co.kr/flexible/normal/970/649/imgdb/original/2020/1012/20201012501979.jpg')
  }

  public async editGenImage(){
    const blob = this.dataURLToBlob(this.getMask());
    const formData = new FormData();
    formData.append('file', blob, 'masked_generated_img.png'); // 서버에서 "file" 키로 받음
    formData.append('prompt', this.editPrompt); // 문자열 프롬프트
    let response = await axios.post('http://localhost:5001/api/edit_image', formData, {
      headers: {
        'Content-Type': 'multipart/form-data',
      },
    });
    this.changeImg(response.data as string)
  }

  public async getDetectionResult() {
    let response = await axios.get('http://localhost:5001/api/detect_image');
    this.detectionResult = response.data;
    return response.data;
  }

  public async getObjectInfo(){
    //const params = '?name=' + encodeURIComponent(this.nowDetectedObject.name) + '&material=' + encodeURIComponent(this.nowDetectedObject.material);
    //let response = await axios.get('http://localhost:5001/api/detected_object_info' + params);
    this.nowDetectedObjectStr = 'paper cup'; //response.data as string;
  }

  public async getOriginMesh(){
    this.isShowFabric = false;
    if (this.fabricCanvas) {
      this.fabricCanvas.dispose();
    }
    for (let i = this.models.children.length - 1; i >= 0; i--) {
      this.models.remove(this.models.children[0]);
    }
    const response = await axios.get('http://localhost:5001/api/generate_original_mesh?object='+encodeURIComponent(this.nowDetectedObject.name), {
      responseType: 'arraybuffer', // Binary 형식으로 데이터 수신
    });

    // ArrayBuffer를 Blob으로 변환
    const blob = new Blob([response.data as BlobPart], { type: 'application/octet-stream' });

    // Blob URL 생성
    const glbUrl = URL.createObjectURL(blob);
    const loader = new GLTFLoader();
    loader.load(
      glbUrl,
      (gltf) => {
        // 모델의 바운딩 박스 계산
        const boundingBox = new THREE.Box3().setFromObject(gltf.scene);
        const center = boundingBox.getCenter(new THREE.Vector3());
        const size = {
          x: boundingBox.max.x - boundingBox.min.x,
          y: boundingBox.max.y - boundingBox.min.y,
          z: boundingBox.max.z - boundingBox.min.z
        };
      
        console.log('Original size:', size);
      
        // size.x를 1로 설정하고 스케일 팩터 계산
        const scaleFactor = 2 / size.x;
        console.log('Scale factor:', scaleFactor);
      
        // 모델 중심을 원점으로 이동
        gltf.scene.position.sub(center);
      
        // 전체 모델에 스케일 적용
        gltf.scene.scale.set(2, size.y * scaleFactor, size.z * scaleFactor);
      
      
        console.log('Model scale:', gltf.scene.scale);
      
        // 회전 적용 (필요한 경우)
        gltf.scene.rotation.x = -Math.PI / 2;
      
        // models 그룹에 추가
        this.models.add(gltf.scene);
        // 모델의 최종 바운딩 박스 계산
        const finalBoundingBox = new THREE.Box3().setFromObject(gltf.scene);
        console.log(this.models, this.scene)
      },
      undefined,
      (error) => {
        console.error('Error loading GLB file:', error);
      }
    );
  }

  public async getGenMesh() {
    this.isShowFabric = false;
    if (this.fabricCanvas) {
      this.fabricCanvas.dispose();
    }
    for (let i = this.models.children.length - 1; i >= 0; i--) {
      this.models.remove(this.models.children[0]);
    }
    // HTTP 요청을 통해 GLB 파일 가져오기
    const response = await axios.get('http://localhost:5001/api/generate_mesh', {
      responseType: 'arraybuffer', // Binary 형식으로 데이터 수신
    });

    // ArrayBuffer를 Blob으로 변환
    const blob = new Blob([response.data as BlobPart], { type: 'application/octet-stream' });

    // Blob URL 생성
    const glbUrl = URL.createObjectURL(blob);
    const loader = new GLTFLoader();
    loader.load(
      glbUrl,
      (gltf) => {
        // 모델의 바운딩 박스 계산
        const boundingBox = new THREE.Box3().setFromObject(gltf.scene);
        const center = boundingBox.getCenter(new THREE.Vector3());
        const size = {
          x: boundingBox.max.x - boundingBox.min.x,
          y: boundingBox.max.y - boundingBox.min.y,
          z: boundingBox.max.z - boundingBox.min.z
        };
      
        console.log('Original size:', size);
      
        // size.x를 1로 설정하고 스케일 팩터 계산
        const scaleFactor = 2 / size.x;
        console.log('Scale factor:', scaleFactor);
      
        // 모델 중심을 원점으로 이동
        gltf.scene.position.sub(center);
      
        // 전체 모델에 스케일 적용
        gltf.scene.scale.set(2, size.y * scaleFactor, size.z * scaleFactor);
      
      
        console.log('Model scale:', gltf.scene.scale);
      
        // 회전 적용 (필요한 경우)
        gltf.scene.rotation.x = -Math.PI / 2;
      
        // models 그룹에 추가
        this.models.add(gltf.scene);
        // 모델의 최종 바운딩 박스 계산
        const finalBoundingBox = new THREE.Box3().setFromObject(gltf.scene);
        const finalSize = {
          x: finalBoundingBox.max.x - finalBoundingBox.min.x,
          y: finalBoundingBox.max.y - finalBoundingBox.min.y,
          z: finalBoundingBox.max.z - finalBoundingBox.min.z
        };
      },
      undefined,
      (error) => {
        console.error('Error loading GLB file:', error);
      }
    );
  }

  public async getInstruction(){
    let response = await axios.get('http://localhost:5001/api/generate_instruction');
    console.log(response.data);
    this.instruction = marked(response.data as string);
  }

  public async getTestObjModel() {
    // HTTP 요청을 통해 OBJ 파일 가져오기
    const response = await axios.get(
      'http://localhost:5001/api/test_obj'
    );
    const objData = (response.data as any).obj;
    const loader = new OBJLoader();
    const model = loader.parse(objData);
  
    // 모델의 바운딩 박스 계산
    const boundingBox = new THREE.Box3().setFromObject(model);
    const center = boundingBox.getCenter(new THREE.Vector3());
    const size = {
      x: boundingBox.max.x - boundingBox.min.x,
      y: boundingBox.max.y - boundingBox.min.y,
      z: boundingBox.max.z - boundingBox.min.z
    };
  
    console.log('Original size:', size);
  
    // size.x를 1로 설정하고 스케일 팩터 계산
    const scaleFactor = 1 / size.x;
    console.log('Scale factor:', scaleFactor);
  
    // 모델 중심을 원점으로 이동
    model.position.sub(center);
  
    // 전체 모델에 스케일 적용
    model.scale.set(1, size.y * scaleFactor, size.z * scaleFactor);
  
  
    console.log('Model scale:', model.scale);
  
    // 회전 적용 (필요한 경우)
    model.rotation.x = -Math.PI / 2;
  
    // models 그룹에 추가
    this.models.add(model);
  
    // 모델의 최종 바운딩 박스 계산
    const finalBoundingBox = new THREE.Box3().setFromObject(model);
    const finalSize = {
      x: finalBoundingBox.max.x - finalBoundingBox.min.x,
      y: finalBoundingBox.max.y - finalBoundingBox.min.y,
      z: finalBoundingBox.max.z - finalBoundingBox.min.z
    };
    console.log('Final size:', finalSize);
  }

  public async getBoundingBox() {
    try {
      const response = await axios.get('http://localhost:5001/api/size?object='+encodeURIComponent(this.nowDetectedObject.name));
      const bbsize = response.data as { 
        size: { x: number; y: number; z: number }
      };

      console.log(bbsize)
      this.detectionResult = bbsize;
    } catch (error) {
      console.error('Error fetching bounding box:', error);
    } finally {
      this.hideLoading(); // 로딩 종료
    }
  }

  public async getPc() {
    const response = await axios.get('http://localhost:5001/api/pc?prompt=' + encodeURIComponent(this.prompt));
    const pointCloudData = (response.data as any).pc as number[][];
  
    // BufferGeometry 생성
    const geometry = new THREE.BufferGeometry();
  
    // Point Cloud 데이터를 Float32Array로 변환
    const positions = new Float32Array(pointCloudData.length * 3);
    const colors = new Float32Array(pointCloudData.length * 3);
    const color = new THREE.Color();
  
    for (let i = 0; i < pointCloudData.length; i++) {
      positions[i * 3] = pointCloudData[i][0]; // x
      positions[i * 3 + 1] = pointCloudData[i][1]; // y
      positions[i * 3 + 2] = pointCloudData[i][2]; // z
  
      // Z 좌표에 따라 색상 설정 (예: 파란색에서 빨간색으로)
      const z = pointCloudData[i][2];
      color.setHSL((z + 1) / 2, 1.0, 0.5); // HSL 색상 설정
      colors[i * 3] = color.r;
      colors[i * 3 + 1] = color.g;
      colors[i * 3 + 2] = color.b;
    }
  
    // BufferGeometry에 데이터 추가
    geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
    geometry.setAttribute('color', new THREE.BufferAttribute(colors, 3));
  
    // 포인트 재질 생성
    const material = new THREE.PointsMaterial({
      size: 0.05, // 포인트 크기
      vertexColors: true, // 버텍스 색상 사용
    });
  
    // Points 객체 생성
    const points = new THREE.Points(geometry, material);
  
    // 모델 그룹에 추가
    this.models.add(points);
  
    console.log('Point cloud loaded and added to scene.');
  }

  

  // 로딩 화면 표시
  private showLoading() {
    this.isLoading = true;
  }

  // 로딩 화면 숨기기
  private hideLoading() {
    this.isLoading = false;
  }
}
